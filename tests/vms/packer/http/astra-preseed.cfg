# Preseed для Astra Linux 1.7
 d-i debian-installer/locale string ru_RU.UTF-8
 d-i keyboard-configuration/xkb-keymap select ru
 d-i netcfg/choose_interface select auto
 d-i netcfg/get_hostname string hardening
 d-i time/zone string Europe/Moscow
 d-i clock-setup/utc boolean true
 d-i partman-auto/method string lvm
 d-i partman-auto/choose_recipe select atomic
 d-i partman-auto/confirm boolean true
 d-i passwd/root-password password ChangeMe!
 d-i passwd/root-password-again password ChangeMe!
 d-i passwd/user-fullname string SecOps
 d-i passwd/username string secops
 d-i passwd/user-password password ChangeMe!
 d-i passwd/user-password-again password ChangeMe!
 d-i pkgsel/include string openssh-server auditd sudo python3
 d-i pkgsel/upgrade select full-upgrade
 d-i pkgsel/install-language-support boolean false
 d-i finish-install/reboot_in_progress note

 d-i preseed/late_command string \
   echo "secops ALL=(ALL) NOPASSWD:ALL" >/target/etc/sudoers.d/secops; \
   in-target chmod 440 /etc/sudoers.d/secops; \
   in-target systemctl enable auditd.service; \
   in-target sed -i 's/^#PermitRootLogin.*/PermitRootLogin no/' /etc/ssh/sshd_config; \
   in-target sed -i 's/^#PasswordAuthentication.*/PasswordAuthentication no/' /etc/ssh/sshd_config;
